<div class="skills-container">
  <!-- Titre et description -->
  <div class="skills-header text-center">
    <h1 class="title">üîç D√©couvrez mes comp√©tences</h1>
    <p class="skills-description">
      R√©solvez les √©nigmes pour d√©bloquer mes comp√©tences. Attention, le temps est limit√© !
    </p>
  </div>

  <!-- Grille des comp√©tences -->
  <div class="skills-grid">
    <div
      class="skill-card"
      *ngFor="let skill of skills; let i = index"
      (click)="openModal(skill)"
    >
      <div class="skill-icon">
        <i [class]="skill.isUnlocked ? skill.icon : 'fas fa-lock'"></i>
      </div>
      <h3 class="skill-name">
        {{ skill.isUnlocked ? skill.name : 'Comp√©tence ' + (i + 1) }}
      </h3>
    </div>
  </div>

  <!-- Bouton pour passer √† la section suivante -->
  <div *ngIf="allSkillsUnlocked" class="next-section-button">
    <button (click)="goToNextSection()">Passer √† la section suivante</button>
  </div>

  <!-- Modale pour les √©nigmes -->
  <div class="modal" *ngIf="isModalOpen">
    <div class="modal-content" #modalContent>
      <button class="close-button" (click)="closeModal()">
        <i class="fas fa-xmark"></i>
      </button>
      <!-- Barre de progression du timer -->
      <div class="timer-bar">
        <div class="progress" [style.width.%]="getProgressBarWidth()"></div>
      </div>
      <div class="row">
        <div class="col-md-8">
          <h2>{{ currentSkill?.question }}</h2>
          <div class="timer-text">Temps restant : {{ countdown }}s</div>
        </div>
        <div class="col-md-4">
          <div class="answers">
            <ng-container *ngFor="let answer of currentSkill?.answers; let i = index">
              <button
                *ngIf="!answer.hidden"
                (click)="selectAnswer(answer)"
                [attr.data-index]="i"
                [ngClass]="{
                  'selected': selectedAnswer?.text === answer.text && !finalized,
                  'final-correct': finalized && selectedAnswer?.text === answer.text && finalAnswerCorrect,
                  'final-incorrect': finalized && selectedAnswer?.text === answer.text && !finalAnswerCorrect
                }"
              >
                {{ answer.text }}
              </button>
            </ng-container>
            <div *ngIf="showAudienceResults" class="audience-results">
              <p *ngFor="let answer of currentSkill?.answers">
                {{ answer.text }} : {{ answer.votes }}%
              </p>
            </div>
          </div>
          <!-- Bouton de validation imm√©diate -->
          <button class="validate-btn" (click)="validateAnswer()" [disabled]="!selectedAnswer || finalized">
            C'est mon dernier mot
          </button>
          <div class="jokers">
            <button (click)="useJoker('50-50')" [disabled]="jokersUsed.includes('50-50')">
              50:50
            </button>
            <button (click)="useJoker('audience')" [disabled]="jokersUsed.includes('audience')">
              üë• L'avis du public
            </button>
            <button (click)="useJoker('pause')" [disabled]="jokersUsed.includes('pause')">
              ‚è≥ Pause chrono
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sons pour les r√©ponses -->
  <audio id="correct-sound">
    <source src="assets/sounds/correct.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>
  <audio id="wrong-sound">
    <source src="assets/sounds/wrong.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>
</div>
