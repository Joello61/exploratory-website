<div class="cv-container">
  <!-- Arri√®re-plan anim√© -->
  <div class="background-animation"></div>

  <div class="container">
    <div class="row justify-content-center align-items-center" *ngIf="isCompleted">
      <!-- Section texte -->
      <div class="col-md-6 text-center text-md-start">
        <h1 class="title">üß© Assemblez le Puzzle</h1>
        <p class="cv-description">
          Faites glisser et d√©posez les pi√®ces pour reconstruire le puzzle de mon
          CV. Une bordure verte indique une pi√®ce correctement plac√©e.
        </p>
      </div>

      <!-- Section puzzle -->
      <div class="col-md-6">
        <div class="cv-puzzle">
          <div
            class="cv-item"
            *ngFor="let piece of cvPieces; let i = index"
            [ngClass]="{ correct: piece.isCorrect, incorrect: !piece.isCorrect }"
            draggable="true"
            (dragstart)="dragStart(i)"
            (drop)="drop(i)"
            (dragover)="allowDrop($event)"
          >
            <img [src]="piece.image" alt="Pi√®ce du puzzle" class="puzzle-image" />
          </div>
        </div>
      </div>

      <!-- Compteur de temps -->
      <div class="col-12 text-center mt-4">
        <div class="timer">
          <span>Temps √©coul√© : {{ elapsedTime }}s</span>
        </div>
      </div>
    </div>

    <!-- Afficher l'image compl√®te si compl√©t√© -->
    <div *ngIf="isCompleted" class="row justify-content-center align-items-center">
      <div class="col-md-8 text-center">
        <img src="img/cv_puzzle/cv.jpg" alt="CV complet" class="img-fluid cv-img" />
        </div>
        <div class="col-md-4 justify-content-center align-items-center">
          <p class="success-message mt-3">F√©licitations ! Vous avez compl√©t√© le puzzle.</p>
        <div class="button mt-4">
          <a [href]="cvFileUrl" download="CV_Full.pdf" class="download-btn me-2"
            >T√©l√©charger le CV</a
          >
          <a href="competences" class="download-btn">Continuer</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Pluie de confettis multicolores -->
  <div *ngIf="isCompleted" class="confetti-container">
    <div
      class="confetti"
      *ngFor="let confetti of confettis"
      [ngStyle]="confetti.style"
    ></div>
  </div>
</div>